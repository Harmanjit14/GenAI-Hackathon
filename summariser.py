from openai import AzureOpenAI
import json
import secret

client = AzureOpenAI(
    api_key=secret.api_key,
    api_version="2023-05-15",
    base_url="https://cloudsec-hackathon-apim.azure-api.net/openai/"
)
with open('data.json', 'r') as f:
    email=json.load(f)

response = client.chat.completions.create(
    model="hack-gpt-4",  # model = "deployment_name".
    messages=[
        {"role": "system", "content": "you are helpfull assistant , helping person who went a long leave to ,catch up."},
        {"role": "user", "content": str(email)},
        {"role": "user","content":"given a list of emails in json format , filter the important one's and give short summary of it, if any action from user side is required , create a todolist and add "}
    ]
)
print(response.choices[0].message.content)

{'id': 1049, 'version': 13, 'title': 'ADR 4.1.1 ID attributes are not unique in a document', 'description': 'Jira: https://jira-eng-rtp3.cisco.com/jira/secure/RapidBoard.jspa?rapidView=2163&projectKey=CLOUDCRES&view=planning&selectedIssue=CLOUDCRES-714&issueLimit=100\n\nIssue: Non unique id `focusItemLogin` was present.\nSolution: Splitted it into separate unique ids.\n\nUI working fine:\n![Screenshot 2023-11-20 at 3.52.54\u202fPM.png](attachment:2199/9722) \n![Screenshot 2023-11-20 at 3.54.01\u202fPM.png](attachment:2199/9723)', 'state': 'MERGED', 'open': False, 'closed': True, 'createdDate': 1700466846810, 'updatedDate': 1701067390701, 'closedDate': 1701067390701, 'fromRef': {'id': 'refs/heads/CLOUDCRES-714', 'displayId': 'CLOUDCRES-714', 'latestCommit': '83d0e2c1a131ce349878aa9dbb45efad3a329563', 'type': 'BRANCH', 'repository': {'slug': 'pxall', 'id': 2199, 'name': 'pxall', 'hierarchyId': '9456d5ddc9f2de2aa46f', 'scmId': 'git', 'state': 'AVAILABLE', 'statusMessage': 'Available', 'forkable': True, 'project': {'key': 'CRES', 'id': 1241, 'name': 'encryption', 'description': 'This Project contains the repositories related to Email Encryption.', 'public': False, 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/projects/CRES'}]}}, 'public': False, 'links': {'clone': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/scm/cres/pxall.git', 'name': 'http'}, {'href': 'ssh://git@bitbucket-eng-bgl1.cisco.com:7999/cres/pxall.git', 'name': 'ssh'}], 'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/projects/CRES/repos/pxall/browse'}]}}}, 'toRef': {'id': 'refs/heads/master', 'displayId': 'master', 'latestCommit': 'a37f7b84f7d278119684170865f76ec8f813ba65', 'type': 'BRANCH', 'repository': {'slug': 'pxall', 'id': 2199, 'name': 'pxall', 'hierarchyId': '9456d5ddc9f2de2aa46f', 'scmId': 'git', 'state': 'AVAILABLE', 'statusMessage': 'Available', 'forkable': True, 'project': {'key': 'CRES', 'id': 1241, 'name': 'encryption', 'description': 'This Project contains the repositories related to Email Encryption.', 'public': False, 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/projects/CRES'}]}}, 'public': False, 'links': {'clone': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/scm/cres/pxall.git', 'name': 'http'}, {'href': 'ssh://git@bitbucket-eng-bgl1.cisco.com:7999/cres/pxall.git', 'name': 'ssh'}], 'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/projects/CRES/repos/pxall/browse'}]}}}, 'locked': False, 'author': {'user': {'name': 'jlohani', 'emailAddress': 'jlohani@cisco.com', 'id': 15157, 'displayName': 'Jayesh Lohani (jlohani)', 'active': True, 'slug': 'jlohani', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/jlohani'}]}}, 'role': 'AUTHOR', 'approved': False, 'status': 'UNAPPROVED'}, 'reviewers': [{'user': {'name': 'avimonda', 'emailAddress': 'avimonda@cisco.com', 'id': 15263, 'displayName': 'Avijit Mondal (avimonda)', 'active': True, 'slug': 'avimonda', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/avimonda'}]}}, 'role': 'REVIEWER', 'approved': False, 'status': 'UNAPPROVED'}, {'user': {'name': 'kahs', 'emailAddress': 'kahs@cisco.com', 'id': 14395, 'displayName': 'Karthikeya H S (kahs)', 'active': True, 'slug': 'kahs', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/kahs'}]}}, 'lastReviewedCommit': '83d0e2c1a131ce349878aa9dbb45efad3a329563', 'role': 'REVIEWER', 'approved': True, 'status': 'APPROVED'}, {'user': {'name': 'vpanneer', 'emailAddress': 'vpanneer@cisco.com', 'id': 5769, 'displayName': 'Venny Suya Panneerselvam (vpanneer)', 'active': True, 'slug': 'vpanneer', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/vpanneer'}]}}, 'role': 'REVIEWER', 'approved': False, 'status': 'UNAPPROVED'}, {'user': {'name': 'ckamath', 'emailAddress': 'ckamath@cisco.com', 'id': 1443, 'displayName': 'Charu Kamath (ckamath)', 'active': True, 'slug': 'ckamath', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/ckamath'}]}}, 'role': 'REVIEWER', 'approved': False, 'status': 'UNAPPROVED'}, {'user': {'name': 'kanchoud', 'emailAddress': 'kanchoud@cisco.com', 'id': 1451, 'displayName': 'KANHAIYA CHOUDHARY (kanchoud)', 'active': True, 'slug': 'kanchoud', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/kanchoud'}]}}, 'role': 'REVIEWER', 'approved': False, 'status': 'UNAPPROVED'}, {'user': {'name': 'harmasi3', 'emailAddress': 'harmasi3@cisco.com', 'id': 16391, 'displayName': 'Harmanjit Singh (harmasi3)', 'active': True, 'slug': 'harmasi3', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/harmasi3'}]}}, 'lastReviewedCommit': '83d0e2c1a131ce349878aa9dbb45efad3a329563', 'role': 'REVIEWER', 'approved': True, 'status': 'APPROVED'}, {'user': {'name': 'solsimon', 'emailAddress': 'solsimon@cisco.com', 'id': 4952, 'displayName': 'Solomon Simon (solsimon)', 'active': True, 'slug': 'solsimon', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/solsimon'}]}}, 'role': 'REVIEWER', 'approved': False, 'status': 'UNAPPROVED'}, {'user': {'name': 'srashett', 'emailAddress': 'srashett@cisco.com', 'id': 15940, 'displayName': 'Srastika Shetty (srashett)', 'active': True, 'slug': 'srashett', 'type': 'NORMAL', 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/users/srashett'}]}}, 'role': 'REVIEWER', 'approved': False, 'status': 'UNAPPROVED'}], 'participants': [], 'properties': {'resolvedTaskCount': 0, 'commentCount': 4, 'openTaskCount': 0}, 'links': {'self': [{'href': 'https://bitbucket-eng-bgl1.cisco.com/bitbucket/projects/CRES/repos/pxall/pull-requests/1049'}]}}